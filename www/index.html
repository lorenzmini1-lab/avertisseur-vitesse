<script>
    const zoneEl = document.getElementById('zone-valeur');
    const vitesseEl = document.getElementById('vitesse-valeur');
    const statutEl = document.getElementById('txt-statut');
    const precisionEl = document.getElementById('txt-precision');

    // Forcer la demande au chargement
    window.onload = () => {
        statutEl.innerText = "Initialisation GPS...";
        
        navigator.geolocation.watchPosition((pos) => {
            const speed = pos.coords.speed ? Math.round(pos.coords.speed * 3.6) : 0;
            vitesseEl.innerText = speed;
            statutEl.innerText = "GPS Connecté";
            precisionEl.innerText = `Précision : +/- ${Math.round(pos.coords.accuracy)}m`;
            
            // Appel OSM (ton ancienne fonction fetchOSMSpeed ici)
            fetchOSMSpeed(pos.coords.latitude, pos.coords.longitude);
            
        }, (err) => {
            // C'est ici que le message d'erreur s'affiche si c'est refusé
            statutEl.innerText = "ERREUR : Allez dans Paramètres > Applications pour autoriser la Position.";
            console.error(err);
        }, { 
            enableHighAccuracy: true, 
            timeout: 10000, 
            maximumAge: 0 
        });
    };

    // Remets ici tes fonctions fetchOSMSpeed et updateDisplay...
</script>
